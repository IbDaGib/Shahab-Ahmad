<!DOCTYPE html>
<html>
    <head>
        <title>My Webpage</title>
        <script src="https://cdn.jsdelivr.net/npm/mustache@4.3.1/mustache.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/graphql-request@3.5.0/dist/index.min.js"></script>
    </head>
    <body>
        <header>
          <h1 id="title"></h1>
          <h2 id="kicker"></h2>
        </header>
    
        <section>
          <h3>Subtitle</h3>
          <p id="subtitle"></p>
        </section>
    
        <section>
          <h3>Content</h3>
          <p id="content"></p>
        </section>
    
        <script>
          const endpoint = 'https://graphql.datocms.com';
    
          const query = `{
            infoPage {
              subtitle {
                value {
                  document
                }
              }
              kicker
              title
              content {
                value {
                  document
                }
              }
            }
          }`;
    
          fetch(endpoint, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              Authorization: 'Bearer YOUR_DATOCMS_API_TOKEN',
            },
            body: JSON.stringify({ query }),
          })
            .then((response) => response.json())
            .then((data) => {
              const infoPage = data.infoPage;
    
              document.getElementById('title').textContent = infoPage.title;
              document.getElementById('kicker').textContent = infoPage.kicker;
              document.getElementById('subtitle').innerHTML = infoPage.subtitle.value.document.children[0].children[0].value;
              document.getElementById('content').innerHTML = infoPage.content.value.document.children.map((child) => child.children[0].value).join('<br>');
            })
            .catch((error) => {
              console.error(error);
            });
        </script>
    </body>
</html>
